<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="store.css">
    <title>Store</title>
    <!-- Your head content here -->
</head>
<body>
    <div class="hero">
        <div class="first-nav">
            <div class="logo">
                <img src="logo.png" alt="Logo">

            </div>
            <div class="navbar">
                <div class="left">
                    <ul>
                        <li>Home</li>
                        <li>Store</li>
                        <!-- <li>Category</li> -->
                        <li>About Us</li>
                    </ul>
                </div>

                <div class="right">
                    <ul>
                        <li><i class="fab fa-linkedin"></i></li>
                        <li><i class="fab fa-twitter"></i></li>
                        <li><i class="fab fa-instagram"></i></li>

                    </ul>
                    <div class="cart" id="cart_icon" onclick="cart_fun()">
                        <li><i class="fas fa-shopping-cart"></i></li><span>
                            <p id="cart_num">0</p>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="content">
        <div class="catalog">
            <h2>Store</h2><span>
                <p>New</p>
            </span>
        </div>
    </div>

    <div class="nav2">
        <div class="na">
            <p onclick="filterByCategory('all')">All</p>
            <p onclick="filterByCategory('Mango')">Mango</p>
            <p onclick="filterByCategory('Lemon')">Lemon</p>
            <p onclick="filterByCategory('Coffee')">Coffee</p>
            <p onclick="filterByCategory('Guava')">Guava</p>
            <p onclick="filterByCategory('Grapefruit')">Grapefruit</p>
        </div>

    <div class="search-container">
        <input type="text" id="search-input" class="search-input" placeholder="Search" onkeyup="searchProducts()">
        <button type="submit" class="search-button"><i class="fa fa-search"></i></button>
    </div>
    
    </div>


    <div id="root">
    </div>


    <div class="pagination"> <button id="backBtn" onclick="goBack()" style="display: none;">&lt;</button>
        <div id="pageNumbers"></div>
    </div>



    <div class="footer">
        <div class="nav_bar">
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Store</a></li>
                <!-- <li><a href="#">Category</a></li> -->
                <li><a href="#">About Us</a></li>
            </ul>
        </div>
        <div class="logo">
            <img src="./logo2.png" alt="" srcset="">
        </div>
        <div class="lonks">
            <ul>
                <li><i class="fab fa-linkedin"></i></li>
                <li><i class="fab fa-twitter"></i></li>
                <li><i class="fab fa-instagram"></i></li>

            </ul>
        </div>
    </div>



    <div id="productDetail" style="display: none;">
        <div class="product_page">
            <div class="front">
                <img id="detailImage" src="" alt="">
            </div>
            <div class="detail">
                <h2 id="detailTitle"></h2>
                <p><span class="rat">Product Rating</span>
                    <span id="detailRating">
                        <i class="fas fa-star star"></i>
                        <i class="fas fa-star star"></i>
                        <i class="fas fa-star star"></i>
                        <i class="fas fa-star star"></i>
                        <i class="fas fa-star stares"></i>
                    </span>
                </p>
                <p class="para">
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Atque sint, similique esse eum doloribus
                    illo cumque error explicabo iste aut incidunt, accusantium maiores perspiciatis dignissimos
                    repellendus fuga nobis voluptates dolores?
                </p>
                <div class="price_page" id="detailPrice"></div>
                <div class="btn_buy" onclick="openModel()">Buy Now<span>></span></div>
                <div class="pre" id="ba" onclick="backtoHome()"><span>←</span>Back to shop</div>
            </div>
        </div>
    </div>



    <!-- Modal HTML -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <h2>Congratulations!</h2>
            <p>Your order has been successfully placed.</p>
            <p>Thank you for shopping with us.</p>
            <a href="./abc.html" class="button">Continue Shopping</a>
        </div>
    </div>


    <div class="cart_bg" id="cartt">
        <div class="prod_bar">
            <h2>PRODUCTS</h2>
            <h4><span id="Prod_num"></span> items</h4>
        </div>
        <div class="line"></div>
        <div class="prod_cart_list" id="cart_listing">

        </div>
        <div class="bottom_cart">
            <a href="#">
                <div class="back_cart"  onclick="backtoHome()"> ← Back to shop</div>
            </a>
            <div class="total_cart">SUBTOTAL : <span id="totel">$0.00</span></div>
        </div>
        <div class="btn_buy" onclick="openModel()">Buy Now<span>></span></div>
    </div>

    <!-- Notification message -->
    <div id="notification">Already in cart</div>



    <script>

        window.addEventListener('scroll', function () {
            var nav = document.querySelector('.first-nav');
            if (window.scrollY > nav.offsetTop) {
                nav.classList.add('fixed-nav');
            }
            else {
                nav.classList.remove('fixed-nav');
            }
        });

        const products = [
            // Your product data here

            { id: 0, image: './img1-removebg-preview.png', title: 'Mango <span>Juice</span>', category: 'Mango', price: 12 },
            { id: 1, image: './img4-removebg-preview.png', title: 'Fruit <span>Juice</span>', category: 'Lemon', price: 15 },
            { id: 2, image: './lemon.png', title: 'Lemon <span>Juice</span>', category: 'Lemon', price: 20 },
            { id: 3, image: './img4-removebg-preview.png', title: 'Coffee', category: 'Coffee', price: 18 },
            { id: 4, image: './img5-removebg-preview.png', title: 'Guava <span>Juice</span>', category: 'Guava', price: 10 },
            { id: 5, image: './img6-removebg-preview.png', title: 'Grapefruit <span>Juice</span>', category: 'Grapefruit', price: 16 },
            { id: 6, image: './img1-removebg-preview.png', title: 'Mango <span>Juice</span>', category: 'Mango', price: 12 },
            { id: 7, image: './img4-removebg-preview.png', title: 'Fruit <span>Juice</span>', category: 'Lemon', price: 15 },
            { id: 8, image: './lemon.png', title: 'Lemon <span>Juice</span>', category: 'Lemon', price: 20 },
            { id: 9, image: './coffee.png', title: 'Coffee', category: 'Coffee', price: 18 },
            { id: 0, image: './img1-removebg-preview.png', title: 'Mango <span>Juice</span>', category: 'Mango', price: 12 },
            { id: 1, image: './img4-removebg-preview.png', title: 'Fruit <span>Juice</span>', category: 'Lemon', price: 15 },
            { id: 2, image: './lemon.png', title: 'Lemon <span>Juice</span>', category: 'Lemon', price: 20 },
            { id: 3, image: './img4-removebg-preview.png', title: 'Coffee', category: 'Coffee', price: 18 },
            { id: 4, image: './img5-removebg-preview.png', title: 'Guava <span>Juice</span>', category: 'Guava', price: 10 },
            { id: 5, image: './img6-removebg-preview.png', title: 'Grapefruit <span>Juice</span>', category: 'Grapefruit', price: 16 },
            { id: 6, image: './img1-removebg-preview.png', title: 'Mango <span>Juice</span>', category: 'Mango', price: 12 },
            { id: 7, image: './img4-removebg-preview.png', title: 'Fruit <span>Juice</span>', category: 'Lemon', price: 15 },
            { id: 8, image: './lemon.png', title: 'Lemon <span>Juice</span>', category: 'Lemon', price: 20 },
            { id: 9, image: './coffee.png', title: 'Coffee', category: 'Coffee', price: 18 },
            { id: 0, image: './img1-removebg-preview.png', title: 'Mango <span>Juice</span>', category: 'Mango', price: 12 },
            { id: 1, image: './img4-removebg-preview.png', title: 'Fruit <span>Juice</span>', category: 'Lemon', price: 15 },
            { id: 2, image: './lemon.png', title: 'Lemon <span>Juice</span>', category: 'Lemon', price: 20 },
            { id: 3, image: './img4-removebg-preview.png', title: 'Coffee', category: 'Coffee', price: 18 },
            { id: 4, image: './img5-removebg-preview.png', title: 'Guava <span>Juice</span>', category: 'Guava', price: 10 },
            { id: 5, image: './img6-removebg-preview.png', title: 'Grapefruit <span>Juice</span>', category: 'Grapefruit', price: 16 },
            { id: 6, image: './img1-removebg-preview.png', title: 'Mango <span>Juice</span>', category: 'Mango', price: 12 },
            { id: 7, image: './img4-removebg-preview.png', title: 'Fruit <span>Juice</span>', category: 'Lemon', price: 15 },
            { id: 8, image: './lemon.png', title: 'Lemon <span>Juice</span>', category: 'Lemon', price: 20 },
            { id: 9, image: './coffee.png', title: 'Coffee', category: 'Coffee', price: 18 },
            { id: 0, image: './img1-removebg-preview.png', title: 'Mango <span>Juice</span>', category: 'Mango', price: 12 },
            { id: 1, image: './img4-removebg-preview.png', title: 'Fruit <span>Juice</span>', category: 'Lemon', price: 15 },
            { id: 2, image: './lemon.png', title: 'Lemon <span>Juice</span>', category: 'Lemon', price: 20 },
            { id: 3, image: './img4-removebg-preview.png', title: 'Coffee', category: 'Coffee', price: 18 },
            { id: 4, image: './img5-removebg-preview.png', title: 'Guava <span>Juice</span>', category: 'Guava', price: 10 },
            { id: 5, image: './img6-removebg-preview.png', title: 'Grapefruit <span>Juice</span>', category: 'Grapefruit', price: 16 },
            { id: 6, image: './img1-removebg-preview.png', title: 'Mango <span>Juice</span>', category: 'Mango', price: 12 },
            { id: 7, image: './img4-removebg-preview.png', title: 'Fruit <span>Juice</span>', category: 'Lemon', price: 15 },
            { id: 8, image: './lemon.png', title: 'Lemon <span>Juice</span>', category: 'Lemon', price: 20 },
            { id: 9, image: './coffee.png', title: 'Coffee', category: 'Coffee', price: 18 },
            { id: 0, image: './img1-removebg-preview.png', title: 'Mango <span>Juice</span>', category: 'Mango', price: 12 },
            { id: 1, image: './img4-removebg-preview.png', title: 'Fruit <span>Juice</span>', category: 'Lemon', price: 15 },
            { id: 2, image: './lemon.png', title: 'Lemon <span>Juice</span>', category: 'Lemon', price: 20 },
            { id: 3, image: './img4-removebg-preview.png', title: 'Coffee', category: 'Coffee', price: 18 },
            { id: 4, image: './img5-removebg-preview.png', title: 'Guava <span>Juice</span>', category: 'Guava', price: 10 },
            { id: 5, image: './img6-removebg-preview.png', title: 'Grapefruit <span>Juice</span>', category: 'Grapefruit', price: 16 },
            { id: 6, image: './img1-removebg-preview.png', title: 'Mango <span>Juice</span>', category: 'Mango', price: 12 },
            { id: 7, image: './img4-removebg-preview.png', title: 'Fruit <span>Juice</span>', category: 'Lemon', price: 15 },
            { id: 8, image: './lemon.png', title: 'Lemon <span>Juice</span>', category: 'Lemon', price: 20 },
            { id: 9, image: './coffee.png', title: 'Coffee', category: 'Coffee', price: 18 },
            { id: 0, image: './img1-removebg-preview.png', title: 'Mango <span>Juice</span>', category: 'Mango', price: 12 },
            { id: 1, image: './img4-removebg-preview.png', title: 'Fruit <span>Juice</span>', category: 'Lemon', price: 15 },
            { id: 2, image: './lemon.png', title: 'Lemon <span>Juice</span>', category: 'Lemon', price: 20 },
            { id: 3, image: './img4-removebg-preview.png', title: 'Coffee', category: 'Coffee', price: 18 },
            { id: 4, image: './img5-removebg-preview.png', title: 'Guava <span>Juice</span>', category: 'Guava', price: 10 },
            { id: 5, image: './img6-removebg-preview.png', title: 'Grapefruit <span>Juice</span>', category: 'Grapefruit', price: 16 },
            { id: 6, image: './img1-removebg-preview.png', title: 'Mango <span>Juice</span>', category: 'Mango', price: 12 },
            { id: 7, image: './img4-removebg-preview.png', title: 'Fruit <span>Juice</span>', category: 'Lemon', price: 15 },
            { id: 8, image: './lemon.png', title: 'Lemon <span>Juice</span>', category: 'Lemon', price: 20 },
            { id: 9, image: './coffee.png', title: 'Coffee', category: 'Coffee', price: 18 },
        ];
        let i = 0;
let cart =[];

        const productsPerPage = 12;
        let currentPage = 1;

        function loadProducts(page) {
            const startIndex = (page - 1) * productsPerPage;
            const pageNumbersContainer = document.getElementById('pageNumbers');
            const totalPages = Math.ceil(products.length / productsPerPage);

            pageNumbersContainer.innerHTML = Array.from({ length: totalPages }, (_, index) => {
                const pageNumber = index + 1;
                return `
            <span class="page-number ${currentPage === pageNumber ? 'active-page' : ''}" onclick="loadPage(${pageNumber})">${pageNumber}</span>
        `;
            }).join('');

            const endIndex = startIndex + productsPerPage;
            const productsToDisplay = products.slice(startIndex, endIndex);
            const productContainer = document.getElementById('root');

            productContainer.innerHTML = productsToDisplay.map((product) => {
                return `
            <div class="box" onclick="opendetail(${product.id})">
                <div class="img-box">
                    <img class="images" src="${product.image}" />
                </div>
                <div class='bottom'>
                    <p>${product.title}<br><span class="price">$${product.price}.00</span></p>
                    <button class="button_list" onclick="addtocart(${i++})"><i class="fas fa-shopping-cart"></i></button>
                </div>
            </div>
        `;
            }).join('');

            const loadMoreBtn = document.getElementById('loadMoreBtn');
            const backBtn = document.getElementById('backBtn');

            // Show/Hide Load More button
            if (endIndex >= products.length) {
                loadMoreBtn.style.display = 'none';
            } else {
                loadMoreBtn.style.display = 'block';
            }

            // Show/Hide Back button
            if (currentPage > 1) {
                backBtn.style.display = 'block';
            } else {
                backBtn.style.display = 'none';
            }
        }

        function loadMore() {
            currentPage++;
            loadProducts(currentPage);
        }

        function goBack() {
            currentPage--;
            loadProducts(currentPage);
        }

        // Initial load
        loadProducts(currentPage);

        function loadPage(page) {
            currentPage = page;
            loadProducts(currentPage);
        }


        function displayProducts(filteredProducts, containerId) {
    const productList = document.getElementById(containerId);
    if (filteredProducts.length > 0) {
        productList.innerHTML = filteredProducts.map(product => `
            <div class="box" onclick="opendetail(${product.id})">
                <div class="img-box">
                    <img class="images" src="${product.image}" />
                </div>
                <div class='bottom'>
                    <p>${product.title}<br><span class="price">$${product.price}.00</span></p>
                    <button class="button_list" onclick="addtocart(${product.id})"><i class="fas fa-shopping-cart"></i></button>
                </div>
            </div>
        `).join('');
    } else {
        productList.innerHTML = '<p>No products found</p>';
    }
}

displayProducts(products, 'root');


        function filterByCategory(category) {
            const categoryLinks = document.querySelectorAll('.na p');
            categoryLinks.forEach(link => link.classList.remove('active'));
            document.querySelector(`.na p[onclick="filterByCategory('${category}')"]`).classList.add('active');

            if (category === 'all') {
                displayProducts(products, 'root');
            } else {
                const filteredProducts = products.filter(product => product.category === category);
                displayProducts(filteredProducts, 'root');
            }
        }
      

        function searchProducts() {
    const searchInput = document.getElementById('search-input').value.toLowerCase();
    
    const filteredProducts = products.filter(product => 
        product.title.toLowerCase().includes(searchInput) || 
        product.category.toLowerCase().includes(searchInput)
    );
    
    displayProducts(filteredProducts, 'root');
}

// Initially display all products
displayProducts(products, 'root');

function opendetail(productId) {
    // Find the product by its unique ID
    const product = products.find(p => p.id === productId);
    if (!product) return; // Exit if product not found

    document.getElementById('detailImage').src = product.image;
    document.getElementById('detailTitle').innerHTML = product.title;
    document.getElementById('detailPrice').innerText = `$${product.price}.00`;

    document.getElementById('root').style.display = 'none';
    document.getElementById('productDetail').style.display = 'block';
}


        function openModel() {
            var modal = document.getElementById('myModal');
            modal.style.display = 'flex';
        }




        function backtoHome() {
            document.getElementById('root').style.display = 'grid';
            document.getElementById('productDetail').style.display = 'none';
            document.getElementById('cartt').style.display = 'none'
        };






let cart_item = document.getElementById('cart')
function cart_fun(){
let cart_item = document.getElementById('cart') 
let cart_bg = document.querySelector('.cart_bg');
cart_bg.style.display = "block"
}


// Function to update the cart display
function updatecart() {
    let j = 0;
    let totalPrice = 0;
    
    if (cart.length == 0) {
        document.getElementById("cart_listing").innerHTML = "cart is empty";
    } else {
        document.getElementById("cart_listing").innerHTML = cart.map((item, index) => {
            // Calculate the total price for this item (price * quantity)
            let itemTotalPrice = item.price * item.quantity;
            totalPrice += itemTotalPrice;

            return `
                <div class="prod_cart">
                    <img src="${item.image}" alt="" srcset="">
                    <div class="title_cart">
                        <h4>${item.title}</h4>
                        <h5>${item.category}</h5>
                    </div>
                    <div class="title_cart">
                        <h4 class="Price_cart" id="org_price">$${item.price}.00</h4>
                        <h5>Pricing</h5>
                    </div>
                    <div class="inc_des">
                        <span class="inc" onclick="increase(${index})">+</span>
                        <span class="number" id="num_cart">${item.quantity}</span>
                        <span class="inc" onclick="decrease(${index})">-</span>
                    </div>
                    <div class="title_cart">
                        <h4 class="" id="tot_price">$${itemTotalPrice}.00</h4>
                        <h5>Total</h5>
                    </div>
                    <div class="remove_cart" onclick="delElement(${j++})">&times;</div>
                </div>
            `;
        }).join('');

        // Update the cart item count
        let cart_num = document.getElementById('cart_num');
        cart_num.innerHTML = cart.length;

        // Update the subtotal
        let totel = document.getElementById('totel');
        totel.innerHTML = `$${totalPrice}.00`;
    }
}


function saveCart() {
    localStorage.setItem('cart', JSON.stringify(cart));
}

function addtocart(productId) {
    let existingItemIndex = cart.findIndex(item => item.id === productId);
    event.stopPropagation();

    if (existingItemIndex >= 0) {
        const a = document.getElementById('notification');
        if (a) {
            a.style.display = "block";
            setTimeout(() => {
                a.style.display = 'none';
            }, 1000);
        }
    } else {
        cart.push({...products.find(p => p.id === productId), quantity: 1});
    }

    saveCart();
    updatecart();
}

function delElement(index) {
    cart.splice(index, 1);
    saveCart();
    updatecart();
}

function increase(index) {
    cart[index].quantity += 1;
    saveCart();
    updatecart();
}

function decrease(index) {
    if (cart[index].quantity > 1) {
        cart[index].quantity -= 1;
    } else {
        cart.splice(index, 1);
    }
    saveCart();
    updatecart();
}


</script>
</body>
</html>